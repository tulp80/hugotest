{{ define "main" }}
  <section class="hero">
    <div class="hero__bg" aria-hidden="true"></div>
    <div class="container hero__layout">
      <div class="hero__content">
        <p class="hero__tagline">Gallery</p>
        <h1 class="hero__title">{{ .Title }}</h1>
        {{ with .Params.description }}<p class="hero__text">{{ . }}</p>{{ end }}
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container">
      {{ $albums := .Params.albums | default (slice "1") }}
      {{ $scratch := newScratch }}
      {{ $scratch.Set "images" (slice) }}
      {{ range $albums }}
        {{ $album := . }}
        {{ range (readDir (printf "static/images/gallery/%s" $album)) }}
          {{ if not .IsDir }}
            {{ $scratch.Add "images" (slice (printf "/images/gallery/%s/%s" $album .Name)) }}
          {{ end }}
        {{ end }}
      {{ end }}
      {{ $images := sort ($scratch.Get "images") }}
      <div class="gallery-grid">
        {{ range $images }}
          {{ partial "responsive-image.html" (dict "src" . "alt" "AyaSelva gallery image" "sizes" "(min-width: 1200px) 25vw, (min-width: 768px) 33vw, 50vw" "widths" (slice 480 720 960 1280)) }}
        {{ end }}
      </div>
    </div>
  </section>
{{ end }}
